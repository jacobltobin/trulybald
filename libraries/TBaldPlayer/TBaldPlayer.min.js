!function(){var t=function(t,i){window[t]=i},i=function(){t("AudioPlayer",a)},a=function(t){var i=this;this.container=t,this.playHandler=new c(i),this.controlHandler=new n(i),this.tracks=$(this.container).find(".track"),this.trackIndex=0,this.audio=new Audio,this.playHandler.switchTrack(this.trackIndex)},n=function(t){var i=this;this.controls={play:$(t.container).find(".play-button"),timeBar:$(t.container).find(".time-bar"),next:$(t.container).find(".next-button"),prev:$(t.container).find(".previous-button"),trackPlay:$(t.container).find(".track-play-button")},this.controls.timeBar.slider({value:0,min:0,max:100,step:.1,slide:function(t,i){console.log(i.value)}}),this.controls.play.click(function(){t.playHandler.playToggle(),$(this).toggleClass("active")}),this.controls.next.click(function(){t.playHandler.goToNextTrack()}),this.controls.prev.click(function(){t.playHandler.goToPrevTrack()}),this.controls.trackPlay.click(function(){t.playHandler.switchTrack($(this).parent().index()),i.toggleActiveTrack(this),i.toggleMainPlay()}),this.toggleActiveTrack=function(t){$(this.controls.trackPlay).removeClass("active"),$(t).toggleClass("active")},this.toggleMainPlay=function(){$(this.controls.play).toggleClass("active")},this.highlightTrack=function(i){$(t.tracks).removeClass("active-track"),$(t.tracks[i]).toggleClass("active-track")}},c=function(t){this.isPlaying=!1,this.currentTrack={duration:0},this.goToNextTrack=function(){t.trackIndex+=1,this.switchTrack(t.trackIndex),this.isPlaying?t.audio.play():null},this.goToPrevTrack=function(){t.trackIndex-=1,this.switchTrack(t.trackIndex),this.isPlaying?t.audio.play():null},this.switchTrack=function(i){t.trackIndex=i;var a=$(t.tracks[i]).attr("data-file");t.audio.src=a,t.controlHandler.highlightTrack(t.trackIndex)},this.playToggle=function(){this.isPlaying?t.audio.pause():t.audio.play(),this.isPlaying=!this.isPlaying}};i()}();