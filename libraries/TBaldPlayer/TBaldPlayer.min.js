!function(){var t=function(t,i){window[t]=i},i=function(){t("AudioPlayer",n)},n=function(t){ap=this,this.audio=new Audio,this.container=t,this.playHandler=new c(ap),this.controlHandler=new a(ap),this.tracks=$(this.container).find(".track"),this.trackIndex=0,this.playHandler.switchTrack(this.trackIndex)},a=function(t){var i=this;this.controls={play:$(t.container).find(".play-button"),next:$(t.container).find(".next-button"),prev:$(t.container).find(".previous-button"),trackPlay:$(t.container).find(".track-play-button"),timeBar:{buffer:$(t.container).find(".time-bar-buffer-background"),played:$(t.container).find(".time-bar-played-background"),handle:$(t.container).find(".time-bar-handle")}},this.controls.timeBar.nudge=function(i){this.set();i?i:t.audio.currentTime;console.log(t.audio.duration)},this.controls.timeBar.set=function(){},this.controls.play.click(function(){t.playHandler.playToggle(),$(this).toggleClass("active")}),this.controls.next.click(function(){t.playHandler.goToNextTrack()}),this.controls.prev.click(function(){t.playHandler.goToPrevTrack()}),this.controls.trackPlay.click(function(){t.playHandler.switchTrack($(this).parent().index()),i.toggleActiveTrack(this),i.toggleMainPlay()}),this.toggleActiveTrack=function(t){$(this.controls.trackPlay).removeClass("active"),$(t).toggleClass("active")},this.toggleMainPlay=function(){$(this.controls.play).toggleClass("active")},this.highlightTrack=function(i){$(t.tracks).removeClass("active-track"),$(t.tracks[i]).toggleClass("active-track")}},c=function(t){this.isPlaying=!1,this.currentTrack={duration:0},t.audio.addEventListener("timeupdate",function(){t.controlHandler.controls.timeBar.nudge()}),this.goToNextTrack=function(){t.trackIndex+=1,this.switchTrack(t.trackIndex),this.isPlaying?t.audio.play():null},this.goToPrevTrack=function(){t.trackIndex-=1,this.switchTrack(t.trackIndex),this.isPlaying?t.audio.play():null},this.switchTrack=function(i){t.trackIndex=i;var n=$(t.tracks[i]).attr("data-file");t.audio.src=n,t.controlHandler.highlightTrack(t.trackIndex)},this.playToggle=function(){this.isPlaying?t.audio.pause():t.audio.play(),this.isPlaying=!this.isPlaying}};i()}();